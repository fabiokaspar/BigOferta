<div class="fixed-top">
    <div class="area-logo pb-3"  style="padding-left: 10%;">
        <div class="mx-auto container row">
            
            <div class="col-8 w-100" style="z-index: 100;">
                <input type="text" 
                    class="float-right form-control rounded w-75 mt-2" 
                    placeholder="Pesquise por ofertas..."
                    #termoPesquisa 
                    (input)="pesquisaPorOfertas(termoPesquisa.value)">
                
                <img src="/assets/sacola2.png" width="50"
                    style="cursor: pointer;"
                    routerLink="/"
                    class="img-fluid float-right mt-0 mr-5" 
                    title="Big Oferta App" 
                    alt="Big Oferta">

                <div class="d-inline-block list-group" style="width: 72%; position: absolute; top: 90%; left: 26%; ">
                    <!-- pipe async se inscreve no observable e passa a receber dados -->
                    <a *ngFor="let oferta of (ofertas | async)" [routerLink]="['/oferta', oferta.id]"
                        routerLinkActive="router-link-active" (click)="limpaPesquisa(oferta.id)"
                        style="z-index: 100;"
                        class="list-group-item list-group-item-action">
                        {{oferta.title | descricaoReduzida:0:60 }}
                    </a>
                </div>
                
            </div>
            
            <div *ngIf="authService?.isLoggedIn()"
                class="col-2" > 

                <div class="profile d-block btn-group clearfix" style="z-index: 100000" dropdown [autoClose]="true" [insideClick]="false">
                    <img [src]="user?.profilePhoto?.url"
                        style="cursor: pointer;"
                        dropdownToggle
                        width="50" 
                        class="float-right d-inline-block img-thumbnail img-fluid" 
                        alt="Foto">
                    <ul *dropdownMenu class="dropdown-menu clearfix p-0" role="menu">
                        <li *ngIf="user?.profilePhoto?.url === '/assets/user.png'" 
                            class="d-block" role="menuitem">
                            <a class="dropdown-item text-center p-2" (click)="initializePhotoUploader(); file1.click()">             
                                <input type="file" ng2FileSelect [uploader]="uploader" #file1 hidden>
                                Adicionar foto
                            </a>
                        </li>
                        <li *ngIf="user?.profilePhoto?.url !== '/assets/user.png'"
                            class="d-block" role="menuitem">
                            <a class="dropdown-item text-center p-2" (click)="initializePhotoUploader(); file2.click()">             
                                <input type="file" ng2FileSelect [uploader]="uploader" #file2 hidden>
                                Trocar foto
                            </a>
                        </li>
                        <li *ngIf="user?.profilePhoto?.url !== '/assets/user.png'"
                            class="d-block" role="menuitem">
                            <a class="dropdown-item text-center p-2" (click)="removePhoto()">
                                Remover foto
                            </a>
                        </li>
                        
                    </ul>
                </div>
            </div>

            <div *ngIf="authService?.isLoggedIn()" class="col-2 w-100">
                <div style="margin-left: 0%;" class="carrinho-group ml-5 d-inline-block">
                    <a title="seu carrinho de compras" class="carrinho d-inline-block" routerLink="/ordem-compra">
                        <img src="/assets/carrinho.png"
                        width="15%" 
                        class="d-inline-block img-fluid" 
                        alt="Seu Carrinho">  
                    </a>
                    <a routerLink="/ordem-compra" 
                        title="valor total do carrinho"
                        style="width: 100%;" 
                        class="mt-1 pl-1 pr-1 d-block preco-carrinho font-weight-bolder">
                        {{carrinhoService.getPrecoTotal() | currency: 'BRL'}}
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="bg-primary">
        <nav class="container navbar navbar-expand-sm bg-primary navbar-dark p-0">
            <ul class="nav navbar-nav">
                <li class="nav-item">
                    <a class="text-white nav-link" [routerLink]="['']" routerLinkActive="router-link-active" href="#">Destaques</a>
                </li>
                <li class="nav-item">
                    <a class="text-white nav-link" [routerLink]="['/restaurante']" href="#">Restaurantes</a>
                </li>
                <li class="nav-item">
                    <a class="text-white nav-link" [routerLink]="['/diversao']" href="#">Diversão</a>
                </li>
                <li *ngIf="authService?.isLoggedIn()" class="nav-item">
                    <a class="text-white nav-link" [routerLink]="['/ordem-compra']" href="#">Meu carrinho</a>
                </li>

                <li *ngIf="!authService?.isLoggedIn()" class="nav-item position-absolute"  style="right:9.5%;">
                    <a class="text-white nav-link" [routerLink]="['/cadastro']" href="#">Cadastro gratuito</a>
                </li>
                <li *ngIf="authService?.isLoggedIn()" class="nav-item">
                    <a class="text-white nav-link" [routerLink]="['/user/painel']" href="#">Painel</a>
                </li>
                
                <li *ngIf="authService?.isLoggedIn()" class="nav-item">
                    <a class="text-white nav-link" (click)="logout()" style="cursor: pointer;">Logout</a>
                </li>
            </ul>
            <span class="position-absolute navbar-text"
                style="right: -4%; cursor: context-menu;">

                <span *ngIf="authService?.isLoggedIn()"
                    class="text-white pl-2 pr-2"
                    [title]="'Welcome '+ getUsername() + '!'">
                    Olá, {{getUsername()}}!
                </span>

                <span *ngIf="!authService?.isLoggedIn()"
                    [routerLink]="['/login']"
                    style="cursor: pointer;"
                    class="text-white nav-link pl-2 pr-2">
                    Entre com sua conta
                </span>
            </span>
        </nav>
    </div>
</div>


